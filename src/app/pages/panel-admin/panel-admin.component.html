<div class="container">
  <h1>Administration des projets</h1>
  <button
    *ngIf="!quickCreate"
    class="btn btn-primary"
    (click)="openQuickCreate()"
  >
    Ajouter un projet
  </button>

  <table class="projects-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Slug</th>
        <th>Titre FR</th>
        <th>Titre EN</th>
        <th>Description FR</th>
        <th>Description EN</th>
        <th>Date début</th>
        <th>Date fin</th>
        <th>Tech.</th>
        <th>Tags</th>
        <th>Catégorie</th>
        <th>Vignette</th>
        <th>Galerie</th>
        <th>Git</th>
        <th>Live</th>
        <th>Rôle</th>
        <th>Feat.</th>
        <th>Actif</th>
        <th>Contenu FR</th>
        <th>Contenu EN</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngIf="quickCreate" class="quick-create-row">
        <td>—</td>
        <td>—</td>
        <td class="editable"><input type="text" placeholder="Titre FR" [(ngModel)]="newProject.titleFr" /></td>
        <td class="editable"><input type="text" placeholder="Titre EN" [(ngModel)]="newProject.titleEn" /></td>
        <td class="editable">
          <textarea rows="2" cols="30" placeholder="Description FR" [(ngModel)]="newProject.descriptionFr"></textarea>
        </td>
        <td class="editable">
          <textarea rows="2" cols="30" placeholder="Description EN" [(ngModel)]="newProject.descriptionEn"></textarea>
        </td>
        <td class="editable"><input type="date" [(ngModel)]="newProject.startDate" /></td>
        <td class="editable"><input type="date" [(ngModel)]="newProject.endDate" /></td>
        <td class="editable">
          <textarea rows="1" cols="30" placeholder="Technologies (séparées par des virgules)" [(ngModel)]="newProject.technologiesStr"></textarea>
        </td>
        <td class="editable">
          <textarea rows="1" cols="30" placeholder="Tags (séparés par des virgules)" [(ngModel)]="newProject.tagsStr"></textarea>
        </td>
        <td class="editable">
          <textarea rows="1" cols="30" placeholder="Catégorie" [(ngModel)]="newProject.category"></textarea>
        </td>
        <td>
          <textarea rows="1" cols="30" placeholder="URL de la vignette" [(ngModel)]="newProject.thumbnailUrl"></textarea>
        </td>
        <td class="gallery-cell"><textarea rows="2" cols="30" placeholder="Galerie (URLs séparées par des points-virgules)" [(ngModel)]="newProject.galleryStr"></textarea></td>
        <td><input type="url" placeholder="URL du dépôt Git" [(ngModel)]="newProject.gitUrl" /></td>
        <td><input type="url" placeholder="URL du site en ligne" [(ngModel)]="newProject.liveUrl" /></td>
        <td class="editable"><input type="text" placeholder="Rôle" [(ngModel)]="newProject.role" /></td>
        <td><input type="checkbox" [(ngModel)]="newProject.isFeatured" /></td>
        <td><input type="checkbox" [(ngModel)]="newProject.active" /></td>
        <td class="content-cell editable"><textarea rows="2" cols="30" placeholder="Contenu FR" [(ngModel)]="newProject.contentFr"></textarea></td>
        <td class="content-cell editable"><textarea rows="2" cols="30" placeholder="Contenu EN" [(ngModel)]="newProject.contentEn"></textarea></td>
        <td class="content-cell editable">
          <button class="btn btn-secondary" (click)="createProject()">Créer</button>
        </td>
      </tr>
      <tr *ngFor="let p of projects" [attr.id]="p.slug">
        <td>{{ p.id }}</td>
        <td class="editable">{{ p.slug }}</td>
        <td class="editable"><input type="text" [(ngModel)]="p.titleFr" /></td>
        <td class="editable"><input type="text" [(ngModel)]="p.titleEn" /></td>
        <td class="editable">
          <textarea rows="2" cols="30" placeholder="Description FR" [(ngModel)]="p.descriptionFr"></textarea>
        </td>
        <td class="editable">
          <textarea rows="2" cols="30" placeholder="Description EN" [(ngModel)]="p.descriptionEn"></textarea>
        </td>
        <td class="editable"><input type="date" [(ngModel)]="p.startDate" /></td>
        <td class="editable">
          <input type="date" [(ngModel)]="p.endDate" placeholder="—" />
        </td>
        <td class="editable">
          <textarea rows="1" cols="30" [(ngModel)]="p.technologiesStr"></textarea>
        </td>
        <td class="editable">
          <textarea rows="1" cols="30" [(ngModel)]="p.tagsStr"></textarea>
        </td>
        <td class="editable">
          <textarea rows="1" cols="30" [(ngModel)]="p.category"></textarea>
        </td>
        <td class="editable">
          <textarea rows="1" cols="30" [(ngModel)]="p.thumbnailUrl"></textarea>
        </td>
        <td class="gallery-cell">
          <textarea rows="2" cols="30" [(ngModel)]="p.galleryStr"></textarea>
        </td>
        <td class="editable"><input type="url" [(ngModel)]="p.gitUrl" /></td>
        <td class="editable"><input type="url" [(ngModel)]="p.liveUrl" /></td>
        <td class="editable"><input type="text" [(ngModel)]="p.role" /></td>
        <td class="editable">
          <input type="checkbox" [checked]="p.isFeatured" />
        </td>
        <td class="editable">
          <input type="checkbox" [checked]="p.active" />
        </td>
        <td class="editable">
          <textarea rows="2" cols="30" placeholder="Contenu FR" [(ngModel)]="p.contentFr"></textarea>
        </td>
        <td class="editable">
          <textarea rows="2" cols="30" placeholder="Contenu EN" [(ngModel)]="p.contentEn"></textarea>
        </td>
        <td class="actions-cell">
          <button class="btn btn-secondary" (click)="editProject(p)">Modifier</button>
          <button class="btn btn-danger" (click)="deleteProject(p)">Supprimer</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
